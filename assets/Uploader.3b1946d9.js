import{L as ue,r as c,w as te,h as ae,s as J,a as ne,o as e,c as a,d as n,e as E,E as Z,z as K,b as o,T as ee,B as m,G as S,H as q,y as k,M as Y,F as j,N as T,O as de,J as me,P as B,Q as ve,x as F,u as W,R as ge,S as fe,p as le,f as oe,_ as pe,I as ye,v as he}from"./index.ddc45797.js";import{T as se}from"./Toast.12ce26aa.js";import{_ as ie}from"./_plugin-vue_export-helper.cdc0426e.js";const _e=[{region:"Arica y Parinacota",comunas:["Arica","Camarones","Putre","General Lagos"]},{region:"Tarapac\xE1",comunas:["Iquique","Alto Hospicio","Pozo Almonte","Cami\xF1a","Colchane","Huara","Pica"]},{region:"Antofagasta",comunas:["Antofagasta","Mejillones","Sierra Gorda","Taltal","Calama","Ollag\xFCe","San Pedro de Atacama","Tocopilla","Mar\xEDa Elena"]},{region:"Atacama",comunas:["Copiap\xF3","Caldera","Tierra Amarilla","Cha\xF1aral","Diego de Almagro","Vallenar","Alto del Carmen","Freirina","Huasco"]},{region:"Coquimbo",comunas:["La Serena","Coquimbo","Andacollo","La Higuera","Paiguano","Vicu\xF1a","Illapel","Canela","Los Vilos","Salamanca","Ovalle","Combarbal\xE1","Monte Patria","Punitaqui","R\xEDo Hurtado"]},{region:"Valpara\xEDso",comunas:["Valpara\xEDso","Casablanca","Conc\xF3n","Juan Fern\xE1ndez","Puchuncav\xED","Quintero","Vi\xF1a del Mar","Isla de Pascua","Los Andes","Calle Larga","Rinconada","San Esteban","La Ligua","Cabildo","Papudo","Petorca","Zapallar","Quillota","Calera","Hijuelas","La Cruz","Nogales","San Antonio","Algarrobo","Cartagena","El Quisco","El Tabo","Santo Domingo","San Felipe","Catemu","Llaillay","Panquehue","Putaendo","Santa Mar\xEDa","Quilpu\xE9","Limache","Olmu\xE9","Villa Alemana"]},{region:"Regi\xF3n del Libertador Gral. Bernardo O\u2019Higgins",comunas:["Rancagua","Codegua","Coinco","Coltauco","Do\xF1ihue","Graneros","Las Cabras","Machal\xED","Malloa","Mostazal","Olivar","Peumo","Pichidegua","Quinta de Tilcoco","Rengo","Requ\xEDnoa","San Vicente","Pichilemu","La Estrella","Litueche","Marchihue","Navidad","Paredones","San Fernando","Ch\xE9pica","Chimbarongo","Lolol","Nancagua","Palmilla","Peralillo","Placilla","Pumanque","Santa Cruz"]},{region:"Regi\xF3n del Maule",comunas:["Talca","Constituci\xF3n","Curepto","Empedrado","Maule","Pelarco","Pencahue","R\xEDo Claro","San Clemente","San Rafael","Cauquenes","Chanco","Pelluhue","Curic\xF3","Huala\xF1\xE9","Licant\xE9n","Molina","Rauco","Romeral","Sagrada Familia","Teno","Vichuqu\xE9n","Linares","Colb\xFAn","Longav\xED","Parral","Retiro","San Javier","Villa Alegre","Yerbas Buenas"]},{region:"Regi\xF3n de \xD1uble",comunas:["Cobquecura","Coelemu","Ninhue","Portezuelo","Quirihue","R\xE1nquil","Treguaco","Bulnes","Chill\xE1n Viejo","Chill\xE1n","El Carmen","Pemuco","Pinto","Quill\xF3n","San Ignacio","Yungay","Coihueco","\xD1iqu\xE9n","San Carlos","San Fabi\xE1n","San Nicol\xE1s"]},{region:"Regi\xF3n del Biob\xEDo",comunas:["Concepci\xF3n","Coronel","Chiguayante","Florida","Hualqui","Lota","Penco","San Pedro de la Paz","Santa Juana","Talcahuano","Tom\xE9","Hualp\xE9n","Lebu","Arauco","Ca\xF1ete","Contulmo","Curanilahue","Los \xC1lamos","Tir\xFAa","Los \xC1ngeles","Antuco","Cabrero","Laja","Mulch\xE9n","Nacimiento","Negrete","Quilaco","Quilleco","San Rosendo","Santa B\xE1rbara","Tucapel","Yumbel","Alto Biob\xEDo"]},{region:"Regi\xF3n de la Araucan\xEDa",comunas:["Temuco","Carahue","Cunco","Curarrehue","Freire","Galvarino","Gorbea","Lautaro","Loncoche","Melipeuco","Nueva Imperial","Padre las Casas","Perquenco","Pitrufqu\xE9n","Puc\xF3n","Saavedra","Teodoro Schmidt","Tolt\xE9n","Vilc\xFAn","Villarrica","Cholchol","Angol","Collipulli","Curacaut\xEDn","Ercilla","Lonquimay","Los Sauces","Lumaco","Pur\xE9n","Renaico","Traigu\xE9n","Victoria"]},{region:"Regi\xF3n de Los R\xEDos",comunas:["Valdivia","Corral","Lanco","Los Lagos","M\xE1fil","Mariquina","Paillaco","Panguipulli","La Uni\xF3n","Futrono","Lago Ranco","R\xEDo Bueno"]},{region:"Regi\xF3n de Los Lagos",comunas:["Puerto Montt","Calbuco","Cocham\xF3","Fresia","Frutillar","Los Muermos","Llanquihue","Maull\xEDn","Puerto Varas","Castro","Ancud","Chonchi","Curaco de V\xE9lez","Dalcahue","Puqueld\xF3n","Queil\xE9n","Quell\xF3n","Quemchi","Quinchao","Osorno","Puerto Octay","Purranque","Puyehue","R\xEDo Negro","San Juan de la Costa","San Pablo","Chait\xE9n","Futaleuf\xFA","Hualaihu\xE9","Palena"]},{region:"Regi\xF3n Ais\xE9n del Gral. Carlos Ib\xE1\xF1ez del Campo",comunas:["Coihaique","Lago Verde","Ais\xE9n","Cisnes","Guaitecas","Cochrane","O\u2019Higgins","Tortel","Chile Chico","R\xEDo Ib\xE1\xF1ez"]},{region:"Regi\xF3n de Magallanes y de la Ant\xE1rtica Chilena",comunas:["Punta Arenas","Laguna Blanca","R\xEDo Verde","San Gregorio","Cabo de Hornos (Ex Navarino)","Ant\xE1rtica","Porvenir","Primavera","Timaukel","Natales","Torres del Paine"]},{region:"Regi\xF3n Metropolitana de Santiago",comunas:["Cerrillos","Cerro Navia","Conchal\xED","El Bosque","Estaci\xF3n Central","Huechuraba","Independencia","La Cisterna","La Florida","La Granja","La Pintana","La Reina","Las Condes","Lo Barnechea","Lo Espejo","Lo Prado","Macul","Maip\xFA","\xD1u\xF1oa","Pedro Aguirre Cerda","Pe\xF1alol\xE9n","Providencia","Pudahuel","Quilicura","Quinta Normal","Recoleta","Renca","Santiago","San Joaqu\xEDn","San Miguel","San Ram\xF3n","Vitacura","Puente Alto","Pirque","San Jos\xE9 de Maipo","Colina","Lampa","Tiltil","San Bernardo","Buin","Calera de Tango","Paine","Melipilla","Alhu\xE9","Curacav\xED","Mar\xEDa Pinto","San Pedro","Talagante","El Monte","Isla de Maipo","Padre Hurtado","Pe\xF1aflor"]}],X={regiones:_e};const I=l=>(le("data-v-f4b4acc5"),l=l(),oe(),l),Ce={id:"dialog-property"},xe=["onSubmit"],be={class:"header-dialog flex align-items-center justify-content-center"},Pe={key:0,class:"container-box"},ke={key:0,class:"field"},Ee=I(()=>n("label",{for:"title"},"Titulo:",-1)),Le={key:1,style:{color:"red"}},Ie={key:1,class:"field"},Ve=I(()=>n("label",{for:"price"},"Precio:",-1)),Se={key:0,class:"info-view"},je={key:2,style:{color:"red"}},Te={key:2,class:"field"},we=I(()=>n("label",{for:"size"},"Tama\xF1o:",-1)),$e={key:0,class:"info-view"},Re={key:2,style:{color:"red"}},Ae={key:3,class:"field"},Me=I(()=>n("label",{for:"region"},"Region:",-1)),qe={key:0,class:"info-view"},We=["value"],ze={key:2,style:{color:"red"}},Ne={key:4,class:"field"},De={key:0,for:"commune"},Ue={key:1,class:"info-view"},Be=["value"],Fe={key:3,style:{color:"red"}},He={key:5,class:"field"},Qe=I(()=>n("label",{for:"type"},"Tipo:",-1)),Ge={key:0,class:"info-view"},Oe=["value"],Je={key:2,style:{color:"red"}},Ye={key:6,class:"field"},Xe=I(()=>n("label",{for:"details"},"Detalles:",-1)),Ze={key:0,class:"flex align-items-center justify-content-center"},Ke={key:1,class:"reco-box"},et=["onClick"],tt={key:7,class:"field"},at={key:0,class:"flex align-items-center justify-content-center"},nt={for:"image"},lt={key:0},ot=I(()=>n("br",null,null,-1)),st={class:"agregador select-none flex align-items-center justify-content-center"},it={key:1,class:"flex align-items-center justify-content-center"},rt={class:"img-box flex align-items-center justify-content-start"},ct=["src"],ut=["onClick"],dt={key:2,class:"msg-problem flex align-items-center justify-content-center"},mt={key:3,class:"flex align-items-center justify-content-center"},vt={class:"img-box flex align-items-center justify-content-start"},gt=["src"],ft={key:8,class:"confirmation-content"},pt=I(()=>n("br",null,null,-1)),yt=I(()=>n("i",null,"(Esta acci\xF3n no se puede revertir)",-1)),ht={class:"field flex align-items-center justify-content-center mb-5"},_t=["value"],Ct={key:1,class:"loading flex align-items-center justify-content-center"},xt={__name:"AddPropiedad",props:["type","product"],emits:["close_dialog","toast_execute"],setup(l,{emit:h}){const f=l;ue(u=>({"328ad6f3":v.value,"37ba578b":L.value}));const t=c(f.product),x=c([]),P=c(!1),b=c(!1),z=c(""),N=c(""),R=c(!1),V=new FileReader,L=c("#184b6d00"),v=c("#184b6d"),D=c(!1),w=c(),A=c(),C=c([]),M=c([]),U=c([{name:"Seleccionar",code:null},{name:"Venta",code:"venta"},{name:"Arriendo",code:"Arriendo"}]),H=()=>{t.value.details.push(w.value),w.value=""};te(()=>f.product,()=>{t.value=f.product}),te(()=>t.value.region,()=>{if(t.value.region){let u=X.regiones.filter(i=>i.region===t.value.region)[0];x.value=u.comunas}}),ae(()=>{if(f.product.region){let u=X.regiones.filter(i=>i.region===f.product.region)[0];x.value=u.comunas}});const Q=u=>{const i=u.target;A.value=i.files[0],V.onload=()=>{const _=new Image;_.onload=()=>{M.value.push(V.result),C.value.push(u.target.files[0]),i.value="",A.value=null},D.value=!1,_.src=V.result},A.value&&V.readAsDataURL(A.value)},G=async()=>{switch(P.value=!0,b.value=!0,f.type){case"EDIT":try{let u=[],i=[],_=null;if(C.value.length>0){for(let s=t.value.names.length-1;s>=0;s--)_=B.child(t.value.names[s]),_.delete();for(let s=0;s<C.value.length;s++){_=B.child("products/"+C.value[s].name),await _.put(C.value[s]);let y=await _.getDownloadURL();u.push("products/"+C.value[s].name),i.push(y)}}else u=t.value.names,i=t.value.images;await fe(F(W,"propiedades",t.value.id),{title:t.value.title,names:u,images:i,type:t.value.type,price:t.value.price,size:t.value.size,details:t.value.details,region:t.value.region,commune:t.value.commune}),h("toast_execute","Propiedad editada exitosamente","success"),b.value=!1,h("close_dialog",!1)}catch{h("toast_execute","Ocurrio un problema al editar la Propiedad","error"),b.value=!1,h("close_dialog",!1)}break;case"NEW":if(C.value.length==0)return;try{let u=[],i=[];for(let s=0;s<C.value.length;s++){let y=B.child("propiedades/"+C.value[s].name);await y.put(C.value[s]);let O=await y.getDownloadURL();u.push("propiedades/"+C.value[s].name),i.push(O)}let _=Math.floor(Math.random()*9e4)+1e4;await ge(F(W,"propiedades","MP"+_.toString()),{title:t.value.title,names:u,images:i,type:t.value.type,price:t.value.price,size:t.value.size,details:t.value.details,region:t.value.region,commune:t.value.commune}),h("toast_execute","Propiedad creada exitosamente","success"),b.value=!1,h("close_dialog",!1)}catch{h("toast_execute","Ocurrio un problema al crear la Propiedad","error"),b.value=!1,h("close_dialog",!1)}break;default:try{for(let u=t.value.names.length-1;u>=0;u--)B.child(t.value.names[u]).delete();ve(F(W,"propiedades",t.value.id)),b.value=!1,h("toast_execute","Propiedad eliminada exitosamente","success"),h("close_dialog",!1)}catch{b.value=!1,h("toast_execute","Ocurrio un problema al eliminar la Propiedad","error"),h("close_dialog",!1)}}P.value=!1},g=J(()=>{switch(f.type){case"NEW":return"Nueva Propiedad";case"EDIT":return"Editar Propiedad";case"DEL":return"Eliminar Propiedad";default:return f.product.title.slice(0,1).toUpperCase()+f.product.title.slice(1)}}),d=J(()=>{switch(f.type){case"NEW":return"Crear";case"EDIT":return"Guardar Cambios";default:return"Eliminar"}}),p=u=>{if(u){L.value="#184b6d",v.value="#ffffff";return}L.value="#184b6d00",v.value="#184b6d"},r=u=>{t.value.details.splice(u,1)},$=u=>{C.value.splice(u,1),M.value.splice(u,1)},re=J(()=>{switch(f.type){case"VIEW":return"Cerrar";default:return"Cancelar"}}),ce=u=>{let i=u.toString(),_=[];for(;i.length>3;)_.unshift(i.slice(-3)),i=i.slice(0,-3);return _.unshift(i),"$"+_.join(".")};return(u,i)=>{const _=ne("font-awesome-icon");return e(),a("div",Ce,[n("div",{class:"bg-close",onClick:i[0]||(i[0]=s=>h("close_dialog",!1))}),E(ee,{name:"fade"},{default:Z(()=>[R.value?(e(),K(se,{key:0,message:z.value,type:N.value},null,8,["message","type"])):o("",!0)]),_:1}),n("form",{class:"dialog-content flex flex-column align-items-center justify-content-start",onSubmit:me(G,["prevent"])},[n("div",be,m(g.value),1),b.value?o("",!0):(e(),a("div",Pe,[l.type=="EDIT"||l.type=="NEW"?(e(),a("div",ke,[Ee,t.value?S((e(),a("input",{key:0,id:"title","onUpdate:modelValue":i[1]||(i[1]=s=>t.value.title=s),required:"true",type:"text",autofocus:"",placeholder:"Titulo",class:"outline-none",name:"name"},null,512)),[[q,t.value.title,void 0,{trim:!0}]]):o("",!0),P.value&&!t.value.title?(e(),a("small",Le,"El Nombre es requerido.")):o("",!0)])):o("",!0),l.type=="EDIT"||l.type=="NEW"||l.type=="VIEW"?(e(),a("div",Ie,[Ve,k(),l.type=="VIEW"?(e(),a("span",Se,m(ce(t.value.price)),1)):o("",!0),t.value&&l.type!="VIEW"?S((e(),a("input",{key:1,id:"price","onUpdate:modelValue":i[2]||(i[2]=s=>t.value.price=s),required:"true",type:"number",autofocus:"",placeholder:"Precio",class:"outline-none",name:"price"},null,512)),[[q,t.value.price,void 0,{trim:!0}]]):o("",!0),P.value&&!t.value.price?(e(),a("small",je,"El Precio es requerido.")):o("",!0)])):o("",!0),l.type=="EDIT"||l.type=="NEW"||l.type=="VIEW"?(e(),a("div",Te,[we,k(),l.type=="VIEW"?(e(),a("span",$e,m(t.value.size),1)):o("",!0),t.value&&l.type!="VIEW"?S((e(),a("input",{key:1,id:"size","onUpdate:modelValue":i[3]||(i[3]=s=>t.value.size=s),required:"true",type:"text",autofocus:"",placeholder:"Tama\xF1o",class:"outline-none",name:"size"},null,512)),[[q,t.value.size,void 0,{trim:!0}]]):o("",!0),P.value&&!t.value.size?(e(),a("small",Re,"El Tama\xF1o es requerido.")):o("",!0)])):o("",!0),l.type=="EDIT"||l.type=="NEW"||l.type=="VIEW"?(e(),a("div",Ae,[Me,k(),l.type=="VIEW"?(e(),a("span",qe,m(t.value.region),1)):o("",!0),l.type!="VIEW"?S((e(),a("select",{key:1,id:"commune","onUpdate:modelValue":i[4]||(i[4]=s=>t.value.region=s),required:"true"},[(e(!0),a(j,null,T(de(X).regiones,(s,y)=>(e(),a("option",{key:y,value:s.region},m(s.region),9,We))),128))],512)),[[Y,t.value.region]]):o("",!0),P.value&&!t.value.region?(e(),a("small",ze,"La region es requerida.")):o("",!0)])):o("",!0),l.type=="EDIT"||l.type=="NEW"||l.type=="VIEW"?(e(),a("div",Ne,[x.value.length>0?(e(),a("label",De,"Comuna:")):o("",!0),k(),l.type=="VIEW"?(e(),a("span",Ue,m(t.value.commune),1)):o("",!0),l.type!="VIEW"&&x.value.length>0?S((e(),a("select",{key:2,id:"commune","onUpdate:modelValue":i[5]||(i[5]=s=>t.value.commune=s),required:"true"},[(e(!0),a(j,null,T(x.value,(s,y)=>(e(),a("option",{key:y,value:s},m(s),9,Be))),128))],512)),[[Y,t.value.commune]]):o("",!0),P.value&&!t.value.commune?(e(),a("small",Fe,"La Comuna es requerida.")):o("",!0)])):o("",!0),l.type=="EDIT"||l.type=="NEW"||l.type=="VIEW"?(e(),a("div",He,[Qe,k(),l.type=="VIEW"?(e(),a("span",Ge,m(t.value.type),1)):o("",!0),l.type!="VIEW"?S((e(),a("select",{key:1,id:"type","onUpdate:modelValue":i[6]||(i[6]=s=>t.value.type=s),required:"true"},[(e(!0),a(j,null,T(U.value,(s,y)=>(e(),a("option",{key:y,value:s.code},m(s.name),9,Oe))),128))],512)),[[Y,t.value.type]]):o("",!0),P.value&&!t.value.type?(e(),a("small",Je,"El Tipo es requerido.")):o("",!0)])):o("",!0),l.type=="EDIT"||l.type=="NEW"||l.type=="VIEW"?(e(),a("div",Ye,[Xe,l.type!="VIEW"?(e(),a("div",Ze,[S(n("input",{id:"details","onUpdate:modelValue":i[7]||(i[7]=s=>w.value=s),type:"text",autofocus:"",placeholder:"Detalle",class:"outline-none",name:"details"},null,512),[[q,w.value]]),n("div",{onClick:H,class:"reco-add ml-2 select-none cursor-pointer flex align-items-center justify-content-center"}," A\xF1adir ")])):o("",!0),t.value?(e(),a("div",Ke,[(e(!0),a(j,null,T(t.value.details,(s,y)=>(e(),a("div",{class:"reco-text flex align-items-center justify-content-between",key:y},[k("-"+m(s)+" ",1),l.type!="VIEW"?(e(),a("div",{key:0,class:"borrar-reco select-none cursor-pointer",onClick:O=>r(y)}," X ",8,et)):o("",!0)]))),128))])):o("",!0)])):o("",!0),l.type=="EDIT"||l.type=="NEW"||l.type=="VIEW"?(e(),a("div",tt,[l.type!="VIEW"?(e(),a("div",at,[n("label",nt,[k("Suba imagenes de la propiedad: "),l.type=="EDIT"?(e(),a("span",lt,[ot,k("(Reemplazar\xE1n las anteriores)")])):o("",!0)]),n("div",st,[k(" A\xF1adir imagen "),n("input",{onMouseover:i[8]||(i[8]=s=>p(!0)),onMouseleave:i[9]||(i[9]=s=>p(!1)),onChange:Q,type:"file",accept:"image/*",class:"cursor-pointer"},null,32)])])):o("",!0),l.type!="VIEW"?(e(),a("div",it,[n("div",rt,[(e(!0),a(j,null,T(M.value,(s,y)=>(e(),a("div",{key:y,class:"preview flex align-items-center justify-content-center"},[n("img",{src:s,alt:"preview"},null,8,ct),n("div",{class:"borrar-img select-none cursor-pointer",onClick:O=>$(y)}," X ",8,ut)]))),128))])])):o("",!0),D.value?(e(),a("div",dt," La imagen seleccionada excede el l\xEDmite de tama\xF1o en p\xEDxeles. ")):o("",!0),l.type=="VIEW"?(e(),a("div",mt,[n("div",vt,[(e(!0),a(j,null,T(t.value.images,(s,y)=>(e(),a("div",{key:y,class:"preview flex align-items-center justify-content-center"},[n("img",{src:s,loading:"lazy",alt:"preview"},null,8,gt)]))),128))])])):o("",!0)])):o("",!0),l.type=="DEL"?(e(),a("div",ft,[n("span",null,[k("\xBFEstas seguro de querer Eliminar a "),n("b",null,m(t.value.title.slice(0,1).toUpperCase()+t.value.title.slice(1)),1),k("? "),pt,yt])])):o("",!0),n("div",ht,[n("button",{class:"boton-close select-none cursor-pointer",type:"button",onClick:i[10]||(i[10]=s=>h("close_dialog",!1))},m(re.value),1),l.type!="VIEW"?(e(),a("input",{key:0,class:"boton-confirm select-none cursor-pointer",type:"submit",value:d.value},null,8,_t)):o("",!0)])])),b.value?(e(),a("div",Ct,[E(_,{icon:"fa-solid fa-spinner","spin-pulse":""})])):o("",!0)],40,xe)])}}},bt=ie(xt,[["__scopeId","data-v-f4b4acc5"]]);const Pt=l=>(le("data-v-ad7ec04f"),l=l(),oe(),l),kt={id:"banners"},Et={class:"header-uploader flex align-items-center justify-content-between"},Lt={class:"flex align-items-center justify-content-center"},It={class:"container"},Vt=Pt(()=>n("thead",null,[n("tr",{class:"grid"},[n("th",{class:"col text-center flex justify-content-center align-items-center",style:{color:"#101615cc","font-size":"130%"}},"Codigo"),n("th",{class:"col text-center flex justify-content-center align-items-center",style:{color:"#101615cc","font-size":"130%"}},"Titulo"),n("th",{class:"col text-center flex justify-content-center align-items-center",style:{color:"#101615cc","font-size":"130%"}},"Primera Imagen"),n("th",{class:"col text-center flex justify-content-center align-items-center",style:{color:"#101615cc","font-size":"130%"}},"Lugar"),n("th",{class:"col text-center flex justify-content-center align-items-center",style:{color:"#101615cc","font-size":"130%"}},"Precio"),n("th",{class:"col text-center flex justify-content-center align-items-center",style:{color:"#101615cc","font-size":"130%"}},"Tipo"),n("th",{class:"col text-center flex justify-content-center align-items-center",style:{color:"#101615cc","font-size":"130%"}},"Acciones")])],-1)),St={key:0},jt={class:"grid py-3"},Tt={class:"col text-center flex justify-content-center align-items-center"},wt={class:"col text-center flex justify-content-center align-items-center"},$t={key:0,class:"col text-center flex justify-content-center align-items-center"},Rt=["src","alt"],At={class:"col text-center flex justify-content-center align-items-center"},Mt={key:1,class:"col text-center flex justify-content-center align-items-center"},qt={key:2,class:"col text-center flex justify-content-center align-items-center"},Wt={class:"col text-center flex justify-content-center align-items-center"},zt={key:1},Nt={class:"col text-center flex justify-content-center align-items-center"},Dt={class:"col text-center flex justify-content-center align-items-center"},Ut={key:0,class:"col text-center flex justify-content-center align-items-center"},Bt=["src","alt"],Ft={class:"col text-center flex justify-content-center align-items-center"},Ht={key:1,class:"col text-center flex justify-content-center align-items-center"},Qt={key:2,class:"col text-center flex justify-content-center align-items-center"},Gt={class:"col text-center flex md:flex-wrap justify-content-center align-items-center"},Ot=["onClick"],Jt=["onClick"],Yt=["onClick"],Xt={class:"flex flex-wrap justify-content-center"},Zt=["onClick"],Kt={__name:"Uploader",setup(l){const h=pe(W,"propiedades"),f=c(!1),t=c(""),x=c();c(),c(),c(),c(),c("#8c623900"),c("#ffffff");const P=c([]),b=c(0),z=c(1);c(!1);const N=c(""),R=c(""),V=c(!1),L=c(""),v=c(null),D=()=>{t.value="NEW",x.value={title:null,images:null,type:null,price:null,size:null,details:[],region:null,commune:null},f.value=!0},w=g=>{t.value="VIEW",x.value=g,f.value=!0},A=g=>{t.value="",f.value=g,x.value=null},C=g=>{t.value="EDIT",x.value=g,f.value=!0},M=g=>{t.value="DEL",x.value=g,f.value=!0};ae(()=>{ye(h,g=>{let d=[],p=[];g.forEach(r=>{let $={id:r.id,title:r.data().title,size:r.data().size,price:r.data().price,region:r.data().region,commune:r.data().commune,details:r.data().details,images:r.data().images,names:r.data().names,type:r.data().type};d.length>=4&&(p.push(d),d=[]),d.push($)}),d.length!=0&&(p.push(d),d=[]),z.value=p.length,P.value=p})});const U=g=>{let d=g.toString(),p=[];for(;d.length>3;)p.unshift(d.slice(-3)),d=d.slice(0,-3);return p.unshift(d),"$"+p.join(".")},H=g=>{b.value=g-1},Q=async()=>{if(L.value!=""){let g=(await he(F(W,"propiedades",L.value.toUpperCase()))).data();v.value=g,v.value&&(v.value.id=L.value.toUpperCase())}else v.value=null},G=(g,d)=>{N.value=g,d=="success"?R.value="#1f702c":d=="warning"?R.value="#86700d":R.value="#b14646",V.value=!0,setTimeout(function(){V.value=!1},2e3)};return(g,d)=>{const p=ne("font-awesome-icon");return e(),a("div",kt,[E(ee,{name:"fade"},{default:Z(()=>[V.value?(e(),K(se,{key:0,message:N.value,type:R.value},null,8,["message","type"])):o("",!0)]),_:1}),n("div",Et,[n("div",{class:"boton-add select-none cursor-pointer",onClick:D},"Nueva Propiedad"),n("div",Lt,[S(n("input",{"onUpdate:modelValue":d[0]||(d[0]=r=>L.value=r),type:"text",autofocus:"",placeholder:"Codigo",class:"outline-none",name:"code"},null,512),[[q,L.value,void 0,{trim:!0}]]),n("div",{class:"boton-add btn-search select-none cursor-pointer",onClick:Q},"Buscar Codigo")])]),n("div",It,[n("table",null,[Vt,v.value?(e(),a("tbody",St,[n("tr",jt,[n("td",Tt,m(v.value.id),1),n("td",wt,m(v.value.title),1),v.value.images?(e(),a("td",$t,[n("img",{src:v.value.images[0],alt:v.value.names[0],loading:"lazy",class:"galery-image"},null,8,Rt)])):o("",!0),n("td",At,m(v.value.region)+", "+m(v.value.commune),1),v.value.price?(e(),a("td",Mt,m(U(v.value.price)),1)):o("",!0),v.value.price?(e(),a("td",qt,m(v.value.type),1)):o("",!0),n("td",Wt,[n("div",{onClick:d[1]||(d[1]=r=>w(v.value)),class:"boton-action select-none cursor-pointer flex justify-content-center align-items-center"},[E(p,{icon:"fa-solid fa-eye"})]),n("div",{onClick:d[2]||(d[2]=r=>C(v.value)),class:"boton-action mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[E(p,{icon:"fa-solid fa-pencil"})]),n("div",{class:"boton-action trash select-none cursor-pointer flex justify-content-center align-items-center",onClick:d[3]||(d[3]=r=>M(v.value))},[E(p,{icon:"fa-solid fa-trash-can"})])])])])):o("",!0),v.value?o("",!0):(e(),a("tbody",zt,[(e(!0),a(j,null,T(P.value[b.value],r=>(e(),a("tr",{key:r.id,class:"grid py-3"},[n("td",Nt,m(r.id),1),n("td",Dt,m(r.title),1),r.images?(e(),a("td",Ut,[n("img",{src:r.images[0],alt:r.names[0],loading:"lazy",class:"galery-image"},null,8,Bt)])):o("",!0),n("td",Ft,m(r.region)+", "+m(r.commune),1),r.price?(e(),a("td",Ht,m(U(r.price)),1)):o("",!0),r.price?(e(),a("td",Qt,m(r.type),1)):o("",!0),n("td",Gt,[n("div",{onClick:$=>w(r),class:"boton-action select-none cursor-pointer flex justify-content-center align-items-center"},[E(p,{icon:"fa-solid fa-eye"})],8,Ot),n("div",{onClick:$=>C(r),class:"boton-action mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[E(p,{icon:"fa-solid fa-pencil"})],8,Jt),n("div",{class:"boton-action trash select-none cursor-pointer flex justify-content-center align-items-center",onClick:$=>M(r)},[E(p,{icon:"fa-solid fa-trash-can"})],8,Yt)])]))),128))])),n("tfoot",null,[n("div",Xt,[(e(!0),a(j,null,T(z.value,r=>(e(),a("div",{class:"indices-tabla select-none cursor-pointer",onClick:$=>H(r),key:r},m(r),9,Zt))),128))])])])]),E(ee,{name:"dialog"},{default:Z(()=>[f.value?(e(),K(bt,{key:0,type:t.value,product:x.value,onClose_dialog:A,onToast_execute:G},null,8,["type","product"])):o("",!0)]),_:1})])}}},na=ie(Kt,[["__scopeId","data-v-ad7ec04f"]]);export{na as default};
